# Huini Site 開發指南與架構設計

這份文件整合了產品經理 (PM) 的需求規格、系統架構師 (Arch) 的技術選型與設計，旨在為開發者 (Dev) 提供一個清晰、完整的開發指引。

---

## 1. 專案目標 (Project Goal)

**使用者故事 (User Story)**:
**作為** 一名全端接案開發者，
**我想要** 建立一個風格年輕、現代化的個人宣傳網站，並包含多種常見網站類型的模擬 Demo，
**是為了** 展示我的技術實力（特別是 UI/UX、動畫與 AI 整合能力），並吸引潛在客戶進行接案合作。

**核心目標**:
透過高品質的互動體驗與視覺設計，證明開發者有能力處理複雜且美觀的網站需求。

---

## 2. 設計準則 (Design Guidelines)

-   **風格關鍵字**: 年輕 (Young)、現代化 (Modern)、科技感 (Tech-savvy)。
-   **主題**: 支援 **亮色/暗色模式 (Light/Dark Mode)** 切換。
-   **導覽體驗**: 流暢的頁面切換動畫，清晰的分類導航。
-   **響應式設計 (RWD)**: 支援桌機、平板、手機等多種設備的最佳瀏覽體驗。

---

## 3. 核心技術棧 (Core Technology Stack)

### 3.1 套件管理器
-   **pnpm**: 高效能且節省磁碟空間的套件管理器。

### 3.2 前端框架
-   **React 19**: 用於構建使用者介面的現代 JavaScript 函式庫。
-   **React Router 7**: 用於 React 應用程式的聲明式路由管理。

### 3.3 UI 與樣式
-   **Tailwind CSS**: Utility-first CSS 框架，用於快速開發 UI。
-   **shadcn/ui**: 可複用 UI 元件庫 (基於 Radix UI 和 Tailwind CSS 構建)。

### 3.4 狀態管理
-   **Zustand**: 輕量、快速且可擴展的精簡狀態管理解決方案。

### 3.5 API 通訊
-   **Axios**: 基於 Promise 的 HTTP 客戶端，用於瀏覽器和 Node.js。

### 3.6 工具函式庫
-   **await-to-js**: 簡化 `async/await` 錯誤處理的包裝器。
-   **date-fns**: 現代 JavaScript 日期處理函式庫。
-   **lodash**: 提供多樣化、高效能的 JavaScript 工具函式。
-   **Zod**: TypeScript 優先的 Schema 宣告和驗證函式庫。

### 3.7 資料庫 (概念性)
-   **PostgreSQL**: 強大且開源的物件關係型資料庫系統。
    *註: 此專案前端僅使用模擬資料*

---

## 4. 功能需求 (Functional Requirements)

### 4.1 全站佈局 (Global Layout)
-   **導航列 (Navigation Bar)**: 包含 Home、Demos (下拉選單)、About/Contact、亮暗模式切換、**語言切換 (中/英)**。
-   **頁腳 (Footer)**: 簡易版權宣告與社群連結。

### 4.2 首頁 (Home Page)
-   **Hero 區塊**: 強烈的視覺衝擊，展示 "Build with Intelligence" 或類似標語。
-   **個人簡介**: 簡述個人特色與能力。
-   **Demo 快速入口**: 快速進入不同類型的 Demo 展示區。

### 4.3 Demo 展示系統 (The Core)
此區塊為網站核心，需建立明確的分類索引頁面，以及以下 7 個獨立的 Demo 子頁面。
**共同需求**:
-   每個 Demo 需具備符合該領域的 UI/UX，並著重展示核心功能 (不超過 3 個) 及簡要說明。
-   **AI Feature Highlight**: 每個 Demo 需包含一個「合理且能突顯價值」的 "AI 智能化操作" 模擬功能。
-   **模擬互動 (Mock Interaction)**: 表單可填寫、按鈕可點擊，需有 Loading State (模擬 API 延遲) 與 Toast/Error 反饋，但不串接真實後端。

#### Demo 類型列表:
1.  **SaaS (Dashboard)**
    -   *場景*: 數據分析儀表板。
    -   *核心功能*: 互動式數據圖表、數據篩選與分組。
    -   *AI*: "Ask AI Insights" (自動分析圖表趨勢，提供商業建議)。
2.  **CMS (Content Management)**
    -   *場景*: 文章編輯器或後台管理介面。
    -   *核心功能*: 所見即所得 (WYSIWYG) 的內容編輯器、內容區塊拖拉排序。
    -   *AI*: "AI Quick Draft" (根據主題自動生成文章大綱或初稿)。
3.  **Landing Page (One-page E-commerce)**
    -   *場景*: 高轉換率的單頁式購物廣告頁。
    -   *核心功能*: 吸引人的產品展示區與動畫、點擊「加入購物車」後的流程動效。
    -   *AI*: "Smart Personalized Offer" (模擬基於用戶行為的個人化推薦)。
4.  **Resource Management (WMS/Booking)**
    -   *場景*: 倉儲庫存管理或資源預約系統。
    -   *核心功能*: 響應式數據表格 (支援 CRUD 模擬)、庫存狀態或預約時段視覺化。
    -   *AI*: "Demand Prediction" (模擬預測未來庫存需求或預約熱點)。
5.  **ERP (Enterprise Resource Planning)**
    -   *場景*: 企業級複雜表單與流程審核。
    -   *核心功能*: 多步驟表單設計與欄位驗證、模擬數據審批流程的可視化。
    -   *AI*: "Intelligent Form Pre-fill" (智慧預填表單資訊，提升效率)。
6.  **Official Website (Customizable)**
    -   *場景*: 企業形象或品牌官方網站。
    -   *核心功能*: 高質感區塊佈局與排版、動態內容展示 (支援客製化風格切換)。
    -   *AI*: "Brand Style Assistant" (根據品牌關鍵字，推薦並預覽網站配色與字體)。
7.  **Custom Solution (Creative)**
    -   *場景*: 展現獨特互動或尖端技術的客製化網站。
    -   *核心功能*: 具創意或技術含量的 WebGL/Canvas 動畫、自定義互動邏輯。
    -   *AI*: (此處 AI 整合具彈性，可視具體展示內容考慮，例如「AI 生成互動路徑」等概念)

### 4.4 個人介紹與聯絡 (About & Contact)
-   **關於我 (About Me)**: 個人簡介、技能樹。
-   **聯絡方式 (Contact)**: 聯絡表單 (模擬發送成功狀態)、Email、社群連結。

---

## 5. 技術架構與實作指引 (Technical Architecture & Implementation Guide)

### 5.1 前端架構概覽
-   **前端框架**: React 19。
-   **路由**: React Router 7，用於管理各頁面與 Demo 的切換。
-   **樣式**: Tailwind CSS，結合 `clsx` 和 `tailwind-merge` 進行動態樣式管理。
-   **UI 元件**: 採用 `shadcn/ui` (或遵循其設計模式) 構建美觀、易用的 UI 元件。
-   **狀態管理**: Zustand 管理所有全域狀態 (如主題、語言)。元件內部狀態使用 React `useState`/`useReducer`。
-   **動畫**: `framer-motion` 實現流暢的頁面過渡和微互動。
-   **國際化 (i18n)**: 使用 Zustand store 管理當前語言和翻譯。翻譯內容存放於 `lib/i18n.ts`。
-   **表單處理與驗證**: `Zod` 定義資料驗證 schema，配合 `useFormValidation` Hook 處理表單驗證邏輯。
-   **API 互動 (模擬)**: `Axios` 負責模擬 API 請求。`useMockApi` Hook 將模擬網路延遲、載入狀態和錯誤響應。
-   **打包工具**: Vite。
-   **套件管理**: pnpm。

### 5.2 後端與資料 (概念性/模擬)
-   **資料庫**: 雖然技術棧指定 PostgreSQL，但此專案前端僅使用記憶體中的模擬資料。
-   **API 端點**: 設計概念性的 API 端點，支援模擬互動，模仿標準 RESTful API 行為。

### 5.3 資料模型 (概念性)

#### Demo 內容模型
```typescript
interface DemoItem {
  id: string;
  category: 'saas' | 'cms' | 'landing' | 'resource' | 'erp' | 'official' | 'custom';
  title: { zh: string; en: string; };
  description: { zh: string; en: string; };
  features: Array<{ zh: string; en: string; }>; // 最多 3 個核心功能
  aiFeature: {
    description: { zh: string; en: string; };
    mockResponse?: any; // AI 互動的模擬數據
  };
  image: string; // Demo 截圖或示意圖的路徑
  mockData: Record<string, any>; // Demo 互動元素的特定模擬數據
}
```

#### 聯絡表單資料模型 (用於 Zod 驗證)
```typescript
const ContactFormSchema = z.object({
  name: z.string().min(1, { message: { zh: "姓名為必填", en: "Name is required" } }),
  email: z.string().email({ message: { zh: "請輸入有效的電子郵件", en: "Invalid email address" } }),
  message: z.string().min(10, { message: { zh: "訊息內容至少10個字", en: "Message must be at least 10 characters" } }),
});
type ContactFormData = z.infer<typeof ContactFormSchema>;
```

### 5.4 API 契約 (模擬)

所有 API 互動將透過 `useMockApi` Hook 進行模擬。

-   **`POST /api/contact`**:
    -   *請求*: `ContactFormData`
    -   *響應 (成功)*: `{ status: 'success', message: { zh: '訊息已送出', en: 'Message sent successfully' } }` (模擬 1-2 秒延遲)
    -   *響應 (失敗)*: `{ status: 'error', message: { zh: '送出失敗，請稍後再試', en: 'Failed to send message, please try again later' } }` (隨機或特定輸入觸發)

-   **`POST /api/demos/:demoId/ai-action`**:
    -   *請求*: `{ prompt: string, context?: any }` (AI 功能特定參數)
    -   *響應 (成功)*: `{ status: 'success', data: any }` (模擬 AI 生成內容/分析，延遲 2-3 秒)
    -   *響應 (失敗)*: `{ status: 'error', message: { zh: 'AI 服務暫時無法使用', en: 'AI service currently unavailable' } }`

-   **`POST /api/demos/:demoId/mock-interaction`**:
    -   *請求*: `{ action: string, payload?: any }`
    -   *響應 (成功)*: `{ status: 'success', data: any }` (模擬互動結果)
    -   *響應 (失敗)*: `{ status: 'error', message: { zh: '操作失敗', en: 'Operation failed' } }`

### 5.5 文件結構與組件劃分 (Component Structure)

```
/home/project/huini-site/
├── public/                 // 靜態資源
├── app/
│   ├── app.css             // 全域樣式，主要為 Tailwind directives
│   ├── root.tsx            // 根佈局，提供 Zustand store 初始化
│   ├── routes/              // React Router 路由定義 (所有檔案名都應為小寫開頭)
│   │   ├── _layout.tsx      // 主要佈局外殼 (導航列、側邊欄、頁腳、Outlet)
│   │   ├── home.tsx         // 首頁
│   │   ├── about.tsx        // 關於我 / 聯絡頁面
│   │   ├── demos/
│   │   │   ├── _index.tsx    // Demo 列表頁，類別導航
│   │   │   ├── [category]/   // 各 Demo 類別的動態路由
│   │   │   │   └── index.tsx    // 特定 Demo 頁面 (例如：saas.tsx, cms.tsx)
│   │   └── 404.tsx          // 自定義 404 頁面
├── components/
│   ├── ui/                  // 可複用 shadcn-like UI 元件 (檔案名應為小寫開頭，例如 `button.tsx`)
│   ├── layout/
│   │   ├── navbar.tsx       // 全域導航，包含主題切換、語言切換 (檔案名應為 kebab-case)
│   │   ├── sidebar.tsx      // 用於桌面版導航，展示 Demo 類別 (檔案名應為 kebab-case)
│   │   ├── footer.tsx       // 全域頁腳 (檔案名應為 kebab-case)
│   │   └── mobile-menu.tsx  // 適用於小螢幕的漢堡選單 (檔案名應為 kebab-case)
│   ├── common/              // 通用元件 (檔案名應為 kebab-case，例如 `loading-spinner.tsx`)
│   ├── demos/               // 各 Demo 類型的專屬子元件 (檔案名應為 kebab-case，例如 `saas-dashboard.tsx`)
│   │   ├── saas-dashboard.tsx // SaaS 儀表板組件
│   │   ├── cms-editor.tsx     // CMS 編輯器組件
│   │   └── ...                 // 其他 Demo 專屬組件
├── stores/                 // Zustand store 定義
│   ├── use-theme-store.ts    // 管理亮暗模式 Zustand store (檔案名應為 kebab-case)
│   └── use-language-store.ts // 管理當前語言 Zustand store (檔案名應為 kebab-case)
├── hooks/
│   ├── use-theme.ts         // 與 use-theme-store 互動的 Hook (檔案名應為 kebab-case)
│   ├── use-language.ts      // 與 use-language-store 互動的 Hook (檔案名應為 kebab-case)
│   ├── use-mock-api.ts       // 模擬帶有延遲/錯誤的 API 呼叫的 Hook (檔案名應為 kebab-case)
│   └── use-form-validation.ts// 基於 Zod 的表單驗證 Hook (檔案名應為 kebab-case)
├── lib/
│   ├── utils.ts             // 工具函式 (例如：clsx, tailwind-merge, 通用輔助函式)
│   ├── i18n.ts              // 翻譯字典和輔助函式
│   └── mock-data.ts         // 所有 Demo 的集中模擬數據 (檔案名應為 kebab-case)
├── types/                  // TypeScript 型別定義
│   ├── global.d.ts
│   ├── demo.d.ts
│   └── i18n.d.ts
└── tailwind.config.ts      // Tailwind CSS 設定檔
```

### 5.6 高層次實作步驟 (High-Level Implementation Steps)

1.  **安裝依賴**: 使用 `pnpm` 安裝所有必要的 npm 套件 (例如 `framer-motion`, `clsx`, `tailwind-merge`, `lucide-react`, `zustand`, `axios`, `await-to-js`, `date-fns`, `lodash`, `zod`, `react-i18next` 或類似的 i18n 函式庫)。
2.  **Tailwind CSS 與 PostCSS 設定**: 配置 `tailwind.config.ts` 以支援亮暗模式、自定義顏色 (例如針對管理介面採用「青色」主題，其他部分現代簡潔)，以及任何所需的插件。
3.  **基本專案結構**: 根據上述文件結構創建目錄和初始文件。
4.  **全域狀態管理 (Global State Management)**:
    *   在 `stores/` 中實現 `useThemeStore.ts` 和 `useLanguageStore.ts`。
    *   在 `app/root.tsx` 中初始化這些 Zustand store。
5.  **全域佈局組件**:
    *   在 `components/layout/` 中開發 `Navbar.tsx`、`Sidebar.tsx`、`Footer.tsx`、`MobileMenu.tsx`。
    *   導航列中包含主題切換和語言切換功能，這些組件將直接使用 Zustand store。
    *   將這些組件整合到 `app/routes/_layout.tsx`。
6.  **路由設定**:
    *   更新 `app/routes.ts` 以反映新的路由結構：`home`、`about`、`demos/_index` 以及 `demos/[category]` 的動態路由。
7.  **工具與 Hook**:
    *   實現 `lib/utils.ts` (用於 `clsx`, `tailwind-merge`)。
    *   開發 `useMockApi.ts` 和 `useFormValidation.ts`。
    *   在 `lib/i18n.ts` 中設定初始的中英文翻譯字典。
8.  **首頁與關於我頁面**: 實現基本內容，並使用 Zustand 管理的 i18n 進行文字處理。
9.  **Demo 列表頁**: `app/routes/demos/_index.tsx` 用於展示類別並連結到個別 Demo。
10. **個別 Demo 頁面**:
    *   創建動態 `app/routes/demos/[category]/index.tsx` 文件。
    *   每個頁面將從 `lib/mockData.ts` 獲取模擬數據，並使用 `useMockApi` 進行互動。
    *   整合 `components/demos/` 中的 Demo 專用組件。
11. **動畫**: 應用 `framer-motion` 實現流暢的頁面過渡 (使用 `AnimatePresence`) 和細微的元素動畫。
12. **RWD 實作**: 確保所有組件和佈局使用 Tailwind 的 utility classes 和 media queries，實現全面的響應式設計。
13. **錯誤處理**: 實現自定義 404 頁面，並確保錯誤邊界 (Error Boundary) 覆蓋應用程式。

---

## 6. 驗收標準 (Acceptance Criteria - AC)

### 成功路徑 (Happy Path)
-   [ ] 使用者能透過導航列順暢切換所有 Demo 頁面。
-   [ ] 每個 Demo 頁面的 AI 按鈕點擊後有 Loading 動畫並顯示模擬結果。
-   [ ] 亮暗模式切換時，所有元件顏色正確適配。
-   [ ] 語言切換功能正常運作，所有頁面內容依選定語言顯示。
-   [ ] 表單送出時顯示 Loading Spinner，隨後顯示 Success Toast。

### 錯誤處理 (Error Handling)
-   [ ] 模擬隨機錯誤：在 Demo 操作中偶爾跳出 "Network Error" 並顯示重試按鈕，測試錯誤邊界 (Error Boundary) 的使用者體驗。
-   [ ] 404 頁面需有設計感並能導回首頁。

### 效能與體驗
-   [ ] 頁面切換無閃爍。
-   [ ] 手機版 (Mobile) 漢堡選單操作順暢，Demo 在手機上排版不跑版。
-   [ ] **全站內容在不同尺寸的設備上均能良好顯示與互動 (Responsive Web Design)。**

---

## 7. 開發準則與品質要求 (Development Standards & Quality)
-   嚴格遵循 TypeScript 確保型別安全。
-   遵循 DRY (Don't Repeat Yourself), YAGNI (You Ain't Gonna Need It), SoC (Separation of Concerns) 原則。
-   優先考慮模組化和可組合性。
-   利用 Tailwind 的 utility-first 方法和 `shadcn/ui` 實現一致、高品質的 UI。

---

## 8. 測試策略 (Test Strategy - High-Level)

-   **單元測試**: 針對 `useMockApi`, `useFormValidation`, `useThemeStore`, `useLanguageStore` 等 Zustand store 及純粹的 UI 組件。
-   **整合測試**: 針對路由、全域佈局互動 (主題/語言切換) 和模擬 Demo 流程。
-   **手動測試**: 徹底檢查跨設備響應性、亮暗模式、i18n 切換，以及所有 Demo 互動 (載入、成功、錯誤狀態)。

---

## 9. 輔助工具與技能 (Helper Tools & Skills for Dev Phase)

開發者在實作過程中，可善用以下技能以提升效率與品質：

### 9.1 `ui-ux-pro-max` (UI/UX 設計智能)
-   **適用時機**: 在設計和實作各 Demo 頁面的 UI/UX 時，特別是需要靈感、最佳實踐、或針對特定 UI 模式 (如儀表板、編輯器、購物車介面) 進行優化時。
-   **如何使用**:
    *   **設計靈感**: 當需要創造「年輕、現代化」的風格或優化導覽體驗時，可向其諮詢。
    *   **元件建議**: 針對特定互動或視覺需求，尋求 Shadcn/UI 的應用建議，或通用 UI 元件的設計考量。
    *   **動畫設計**: 探索如何運用 `framer-motion` 實現特定流暢動畫效果。
    *   **響應式佈局**: 獲取不同設備下 UI 佈局的優化方案。

### 9.2 `pm2-logger` (pm2 日誌管理)
-   **適用時機**: **用於專案開發測試或維運**
-   **如何使用**: 可利用 `pm2-logger` skill來：
    *   **生成 pm2 設定**: 協助建立 `pm2.json` 設定檔，標準化進程管理。
    *   **日誌路徑對應**: 配置 PM2 進程的日誌檔案位置，便於追蹤和調閱。
    *   **問題排除**: 透過 `pm2-logger` 的日誌功能，輔助監控和排除應用程式運行問題。